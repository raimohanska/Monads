<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Monads by @raimohanska</title>

		<meta name="description" content="Monads for Dummies">
		<meta name="author" content="Juha Paananen">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/sky.css" id="theme">
    <style>
      .reveal pre.left,.reveal pre.right {
        width: 45%;
        float: left;
        margin: 2%;
      }
      .notransform { text-transform: none !important; }
    </style>

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">
<section>
<h1>Monads</h1>
<h3>Not Burritos</h3>
<p>
<small>Created by <a href="http://github.com/raimohanska">Juha Paananen</a> / <a href="http://twitter.com/raimohanska">@raimohanska</a></small>
</p>
  <aside class="notes" data-markdown>
- Mystified, simple
- hope you feel that way to after this
- first intro to why monads, then intro to haskell (I don't assume you all know it), typeclasses, functors and monads
- we'll do short time-boxed exercises (in haskell) between my preachings.
- cool if you have your ghc. there's a web alternative though
- finally there will be more free coding and time for questions etc
- about me: software consultant and coder from Reaktor. long Java background, FP enthusiast since 2008 or so, used haskell in small projects since 2010 or so. very much into FRP, created reactive-bacon for Haskell, then Bacon.js for javascript. not a Haskell guru, morelike a fanboy
  </aside>
</section>

<section><h2>Monads are like...</h2>
  <aside class="notes" data-markdown>

- burritos : not unless burritos too are monoids in the category of endofunctors
- "are just a .." won't do justice. they can be seen as "programmable semicolon", "execution context", "container".. but those are just different aspects of monads
- monads are simple

  </aside>
</section>

<section> <h2 style="text-transform:none;">m a -> (a -> m b) -> m b</h2> </section>

<section><h3>How do you learn to code?</h3></section>

<section><h3>How do you learn monads?</h3></section>

<section>
<img style="width: 80%;" src="img/batman-monads.png">
</section>

<section><h1>Motivation</h1></section>

<section>
<h3>Monad as Execution Context</h3>
<h2 class="fragment">Haskell IO</h2>
  <aside class="notes" data-markdown>

- If side-effects, runs in IO monad
- Input, Output, Mutable state
- Compiler knows if you don't have side-effects
- Caching etc
- Everything that has side-effects is an IO action
  </aside>
</section>
<section>
<h4>Monad as Execution Context</h4>
<h2>IO actions</h2>
<h4 class="notransform fragment">getTweets :: IO [Tweet]</h4>
<h4 class="notransform fragment">retweet :: [Tweet] -> IO ()</h4>
</section>

<section>
<h4>Monad as Execution Context</h4>
<h2 class="notransform"><small>getTweets</small> >>= <small>retweet</small></h2>
</section>

<section>
<h2>>>=</h2>
<h4>The programmable semicolon</h4>
</section>

<section>
<h2>>>=</h2>
<h4>Maybe - composes optional values</h4>
</section>

<section>
<h2>>>=</h2>
<h4>List - transforms lists</h4>
</section>

<section>
<h2>>>=</h2>
<h4>STM - composes transactional operations</h4>
</section>

<section>
<h2>>>=</h2>
<h4>Snap - access to request/response</h4>
</section>

<section>
<h2>>>=</h2>
<h4>Continuation - composes callbacks</h4>
</section>

<section>
<h2>Do-notation</h2>
<pre><code data-trim contenteditable>
do
  tweets <- getTweets
  let reversed = map reverse tweets
  retweet reversed
</code></pre>
</section>

<section>
<h1>Haskell</h1>
<aside class="notes" data-markdown>
- Functional language
- Simple, powerful type system
- Lazy evaluation
</aside>
</section>
<section>
  <section>
    <h1>Your First Haskell Program</h1>
    <aside class="notes" data-markdown>
    - Open GHCI
    - Evaluate 1, 1 + 2
    - Write `plus3`
    - Add `main`
    - Add #!/usr/bin/env runhaskell
    - Everyone does the same to ensure envs are ok
    </aside>
  </section>
  <section>
  examples/haskell/Plus3.hs
  </section>
</section>
<section>
<h1>Haskell is cool</h1>
<aside class="notes" data-markdown>
- But we've limited time
- Introduce the Maybe type
</section>

<section>
<h1>Maybe</h1>
</section>

<section>
<img src="img/value.png">
</section>

<section>
<img src="img/value_and_context.png">
</section>

<section>
<img src="img/context.png">
  <aside class="notes" data-markdown>

- Like `null` but a lot smarter 

  </aside>
</section>

<section>
<h2>Maybe</h2>
<pre><code data-trim contenteditable>
data Maybe a = Just a |Â Nothing
</code></pre>
  <aside class="notes" data-markdown>
- This is data type definition in Haskell
- `a` is the type parameter
- `Just a` and `Nothing` are data constructors
- GHCI 
  - :i Maybe
  - Just 2
  - plus3 2
  - plus3 (Just 2)
  - implement plus3Maybe
  - fmap plus2 (Just 2)
</aside>
</section>

<section>
<img src="img/fmap_apply.png">
  <aside class="notes" data-markdown>
  - `fmap` makes our `plus3` function support `Maybe`
  - What is the magic that happened?
  - Functor happened
  </aside>
</section>

<section>
<h1>Functor</h1>
  <aside class="notes" data-markdown>
  - Functor let's you apply a function to a value in a context
  - In this case we applied `plus3` in the `Maybe` context
  </aside>
</section>

<section>
<h2>Functor typeclass</h2>
<img src="img/functor_def.png">
  <aside class="notes" data-markdown>
  - More technically, it's a `typeclass`
  - Typeclasses are like interfaces
  - Here's the typeclass definition
  - It says "f is a Functor given it has this `fmap` method with this type signature"
  - Next, let's have a closer look at the type signature
  </aside>
</section>

<section>
<h2>fmap type signature</h2>
<img src="img/fmap_def.png">
  <aside class="notes" data-markdown>
  - This is the type signature of `fmap`
  - Type signature defined the input and output types of a function
  - Here types `a` and `b` can be anything - fmap suits them all
  </aside>
</section>
<section>
<h2>Maybe as Functor</h2>
<pre class="fragment"><code data-trim contenteditable>
instance Functor Maybe where
  fmap _ Nothing = Nothing
  fmap f (Just x) = Just (f x)
</code></pre>
<p class="fragment">... but this is of course already included</p>
  <aside class="notes" data-markdown>
  - We already used `fmap` on `Maybe`
  - Possible because `Maybe` has a `Functor`
  - Suppose it didn't, we could define it ourselves
  </aside>
</section>

<section>
  <h2>Functors are cool</h2>
  <pre class="fragment"><code data-trim contenteditable>
getPostTitle id = case getPost id of
  Just post -> Just (titleOf post)
  Nothing -> Nothing

getPostTitle id = fmap titleOf (getPost id)
  </code></pre>
  <p class="fragment">Because you can apply a function to a value in a context</p>
  <aside class="notes" data-markdown>
  </aside>
</section>

<section>
<h1>That's it!</h1>
<p>Juha Paananen (@raimohanska)</p>
<p><a href="https://github.com/raimohanska/monads">github.com/raimohanska/monads</a></p>
</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
